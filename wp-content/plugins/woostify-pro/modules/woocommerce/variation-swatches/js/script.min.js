'use strict';var woostifyAvailableVariations=function(a){var b=a.closest("#woostify-quick-view-panel")?document.getElementById("woostify-quick-view-panel"):document.getElementById("view");if(b){var c=b.querySelectorAll(".variations [name^=\"attribute_\"] option");if(c.length){var d=[];c.forEach(function(a){var b=a.getAttribute("value");!b||a.disabled||d.push(b)});var e=b.querySelectorAll(".variations .swatch");e.length&&e.forEach(function(a){var b=a.getAttribute("data-value");d.includes(b)?a.classList.remove("unavailable"):a.classList.add("unavailable")})}}},woostifyVariationSwatches=function(){var a=document.querySelectorAll("form.variations_form");if(a.length)for(var b=0,c=a.length;b<c;b++){var d=a[b],e=d.querySelectorAll(".swatch");if(!e.length)return;var f=[],g=new Event("change",{bubbles:!0}),h=new Event("woostify_no_matching_variations");e.forEach(function(a){a.onclick=function(b){if(b.preventDefault(),!a.classList.contains("unavailable")){var c=a.closest(".variations"),e=a.closest(".value"),i=c.querySelectorAll("select"),j=e.querySelector("select"),k=j.getAttribute("data-attribute_name")||j.getAttribute("name"),l=a.getAttribute("data-value"),m=j?j.querySelectorAll("option[value=\""+l+"\"]"):[],n=siblings(a);return m.length?void(-1===f.indexOf(k)&&f.push(k),a.classList.contains("selected")?(j.value="",a.classList.remove("selected"),delete f[f.indexOf(k)]):(a.classList.add("selected"),n.length&&n.forEach(function(a){a.classList.remove("selected")}),j.value=l),j.dispatchEvent(g)):void d.dispatchEvent(h,a)}}});var j=d.querySelector(".reset_variations");j&&j.addEventListener("click",function(){var a=d.querySelectorAll(".swatch");a.length&&a.forEach(function(a){a.classList.remove("unavailable","selected")}),f=[]}),d.addEventListener("woostify_no_matching_variations",function(){window.alert(wc_add_to_cart_variation_params.i18n_no_matching_variations_text)})}},woostifySwatchList=function(){var a=document.querySelectorAll(".swatch-list");a.length&&a.forEach(function(a){var b=a.closest(".product"),c=b.querySelector(".product-loop-image-wrapper"),d=b.querySelector(".product-loop-image"),e=a.querySelectorAll(".swatch");e.length&&e.forEach(function(a){var b=siblings(a),e=a.getAttribute("data-slug");a.classList.contains("selected")&&(d.setAttribute("srcset",""),d.src=e),a.onclick=function(){d.getAttribute("data-swatch")||d.setAttribute("data-swatch",d.src),c.classList.add("circle-loading"),d.setAttribute("srcset",""),b.length&&b.forEach(function(a){a.classList.remove("selected")}),a.classList.contains("selected")?(a.classList.remove("selected"),d.src=d.getAttribute("data-swatch")):(a.classList.add("selected"),d.src=e);var f=new Image;f.src=e,f.onload=function(){c.classList.remove("circle-loading")}}})})};document.addEventListener("DOMContentLoaded",function(){woostifyVariationSwatches(),woostifySwatchList(),jQuery(document.body).on("check_variations",function(a){woostifyAvailableVariations(a.target)})});