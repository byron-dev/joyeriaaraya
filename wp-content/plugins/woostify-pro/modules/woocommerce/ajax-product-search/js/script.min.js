'use strict';var woostifySearchDelay=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return function(b,c){clearTimeout(a),a=setTimeout(b,c)}}(),woostifyAjaxProductSearch=function(){var a=document.querySelectorAll(".search-field"),b={link:"aps-link",image:"aps-thumbnail",itemTag:"<div class=\"aps-item\">",contentTag:"<div class=\"asp-content\">",priceTag:"<div class=\"aps-price\">",titleTag:"<h4 class=\"aps-title\">",skuTag:"<div class=\"aps-sku\">",closeTag:"</div>",titleClose:"</h4>"},c={dataHtml:function(a,b){console.log(a);var c,d,e="",f=this,g=jQuery(b).find(".search-dialog-count"),h=a.products;if(jQuery(".link-search-page").html(a.product_found+" "+a.product),0<a.products.length){if(0<g.length)g.html(a.product_found+" "+a.product);else{var k="<span class=\"search-dialog-count aps-highlight\">"+a.product_found+" products</span>";jQuery(".dialog-search-title").append(k)}for(c=0,d=h.length;c<d;c++){var l=h[c],m="";l.sku_hightline&&(m="SKU: "),e+=f.itemTag+"<a class=\""+f.link+"\" href=\""+l.url+"\"></a><img class=\""+f.image+"\" src=\""+l.image+"\" alt=\""+l.name+"\">"+f.contentTag+f.titleTag+l.name_hightline+f.titleClose+f.priceTag+l.html_price+f.closeTag+f.skuTag+m+l.sku_hightline+f.closeTag+f.closeTag+f.closeTag}b.querySelector(".ajax-search-results").innerHTML=e}else b.querySelector(".ajax-search-results").innerHTML="<div class=\"aps-no-posts-found\">"+a.not_found+"</div>",g.html("")}};a.length&&"undefined"!=typeof woostify_ajax_product_search_data&&a.forEach(function(a){var d=a.closest("form"),e=!!d&&d.classList.contains("woocommerce-product-search"),f=!!d&&d.querySelector(".search-field");if(d&&e&&f){f.setAttribute("autocomplete","off");var g=d.closest(".site-search")||d.closest(".dialog-search-content"),h=!!g&&g.querySelector(".ajax-search-results");if(h){var i=document.createElement("span");i.setAttribute("class","clear-search-results ti-close"),f.parentNode.insertBefore(i,f.nextSibling),woostify_ajax_product_search_data.select&&(d.insertAdjacentHTML("afterbegin",woostify_ajax_product_search_data.select),d.classList.add("category-filter"));var j=d.querySelector(".ajax-product-search-category-filter"),k=d.querySelector("input[name=lang]"),l=function(){var a=void 0!==arguments[0]&&arguments[0],e=j?j.value.trim():"",l=k?k.value.trim():"",m=f.value.trim();if(!m)return i.classList.remove("show"),h.classList.add("hide"),jQuery(g).find(".total-result-wrapper").html(),void jQuery(g).find(".search-dialog-count").html();i.classList.add("show"),h.classList.remove("hide"),i.onclick=function(){f.value="",i.classList.remove("show"),h.classList.add("hide"),jQuery(g).find(".total-result-wrapper").html(),jQuery(g).find(".search-dialog-count").html()};var n=f.getAttribute("data-value");if(m!==n||a){f.setAttribute("data-value",m),d.classList.add("loading");var o;o=jQuery(d).attr("action")+"?post_type=product&s="+m,e&&(o+="&cat_id="+e),l&&(o+="&lang="+l),jQuery(document).on("keyup",function(a){13===a.keyCode&&(window.location.href=o)});var p={ajax_nonce:woostify_ajax_product_search_data.ajax_nonce,keyword:m,cat_id:e,lang:l};jQuery.ajax({type:"GET",url:woostify_ajax_product_search_data.url,data:p,beforeSend:function(){jQuery(d).addClass("loading")},success:function(a){jQuery(d).removeClass("loading"),jQuery(g).find(".total-result-wrapper").html(),0<a.data.products.length&&jQuery(g).find(".total-result-wrapper").html("<a href=\""+o+"\" class=\"link-search-page aps-highlight\">"+a.data.size+" products</a>"),c.dataHtml.call(b,a.data,g)}})}};f.addEventListener("input",function(){woostifySearchDelay(function(){l()},500)}),j&&j.addEventListener("change",function(){l(!0),f.focus()})}}})};document.addEventListener("DOMContentLoaded",function(){woostifyAjaxProductSearch()});