'use strict';function woostifyQuickViewVariation(){var a=jQuery("#woostify-quick-view-panel .variations_form");a.length&&(void 0!==typeof wc_add_to_cart_variation_params&&(a.wc_variation_form(),a.find(".variations select").change()),"function"==typeof woostifyVariationSwatches?woostifyVariationSwatches():"undefined"!=typeof jQuery.fn.tawcvs_variation_swatches_form&&a.tawcvs_variation_swatches_form())}function woostifyQuickViewSlider(){var a=document.getElementById("quick-view-gallery");if(a&&a.classList.contains("quick-view-slider")){var b=tns({loop:!1,container:"#quick-view-gallery",items:1,mouseDrag:!0});jQuery(document.body).on("found_variation","form.variations_form",function(){b.goTo("first")}),jQuery(".reset_variations").on("click",function(){b.goTo("first")})}}function woostifyQuickViewClose(){document.documentElement.classList.remove("quick-view-open")}function woostifyQuickView(){var a=document.querySelectorAll(".product-quick-view-btn"),b=document.getElementById("woostify-quick-view-panel"),c=!!b&&b.querySelector(".quick-view-content"),d=!!b&&b.querySelector(".quick-view-close-btn");if(a.length)for(var e=0,f=a.length;e<f;e++)a[e].onclick=function(){var a=this.getAttribute("data-pid"),e=!!b&&b.getAttribute("data-view_id");if(a===e)return void document.documentElement.classList.add("quick-view-open");c.innerHTML="",document.documentElement.classList.add("quick-view-open","quick-viewing"),document.body.addEventListener("keyup",function(a){27===a.keyCode&&woostifyQuickViewClose()}),d.addEventListener("click",function(){woostifyQuickViewClose()}),b.addEventListener("click",function(a){this!==a.target||woostifyQuickViewClose()}),b.setAttribute("data-view_id",a);var f=new Request(woostify_quick_view_data.ajax_url,{method:"POST",body:"action=shop_quick_view&ajax_nonce="+woostify_quick_view_data.ajax_nonce+"&product_id="+a,credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"})});fetch(f).then(function(a){return 200===a.status?void a.json().then(function(a){document.documentElement.classList.remove("quick-viewing"),c.innerHTML=a.content;var b=document.querySelector(".shop-quick-view .woocommerce-review-link");if(b&&b.setAttribute("href",a.review_link),"function"==typeof customQuantity&&customQuantity(),woostifyQuickViewSlider(),woostifyQuickViewVariation(),"function"==typeof woostifyCountdownUrgency&&woostifyCountdownUrgency(),"function"==typeof productVariation&&productVariation(".quick-view-images","#woostify-quick-view-panel form.variations_form"),"function"==typeof woostifyAjaxSingleAddToCartButton)woostifyAjaxSingleAddToCartButton();else{var d=document.querySelector(".quick-view-content form.cart");d&&d.setAttribute("action","")}"function"==typeof woostifyBuyNowProduct&&woostifyBuyNowProduct(!0);var e=!!c&&c.querySelector(".price");e&&a.bm_live_price&&(e.innerHTML=a.bm_live_price),"function"==typeof woostifyStockQuantityProgressBar&&setTimeout(function(){woostifyStockQuantityProgressBar()},200)}):(alert(woostify_quick_view_data.ajax_error),void console.log("Status Code: "+a.status))}).catch(function(a){alert(woostify_quick_view_data.ajax_error),console.log(a)}).finally(function(){let a=new Event("woostify_quickview_displayed",{bubbles:!0});document.dispatchEvent(a)})}}document.addEventListener("DOMContentLoaded",function(){woostifyQuickView()});