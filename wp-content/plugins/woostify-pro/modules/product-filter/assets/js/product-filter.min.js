'use strict';const woostifyFilterSearchDelay=function(){let a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return function(b,c){clearTimeout(a),a=setTimeout(b,c)}}(),woostifyFilterDatePicker=function(){let a=document.querySelector(".w-product-filter-type-date-range");if(a){let b={mode:"dp-below"};"undefined"!=typeof woostify_datepicker_data&&(b.lang={},b.lang.months=woostify_datepicker_data.months,b.lang.days=woostify_datepicker_data.days,b.lang.today=woostify_datepicker_data.today,b.lang.clear=woostify_datepicker_data.clear,b.lang.close=woostify_datepicker_data.close);let c=a.querySelectorAll(".w-filter-date-picker");for(let a=0,d=c.length;a<d;a++){let d;if("object"===d)return;d=TinyDatePicker(c[a],b)}}},woostifyAjaxFilter=function(){var a=Math.round;let b=document.querySelectorAll(".w-product-filter[data-type]"),c=document.querySelector(".w-result-filter");if(!c)return;let d=c.querySelector(".w-filter-key"),e=c.querySelector(".products"),f=document.getElementById("wpadminbar"),g=f?f.offsetHeight:0,h={},i=1,j=new CustomEvent("filtered",{detail:!0});const k=function(){let a=c.querySelectorAll(".woocommerce-pagination .page-numbers a.page-numbers");if(a.length)for(let b=0,d=a.length;b<d;b++)a[b].onclick=function(d){d.preventDefault();let e=c.querySelector(".woocommerce-pagination .page-numbers .page-numbers.current"),f=a[b].classList.contains("prev"),g=a[b].classList.contains("next"),h=1;f&&e&&(h=+e.innerText-1),g&&e&&(h=+e.innerText+1),f||g||(h=+a[b].innerText),i=h,document.body.dispatchEvent(new CustomEvent("filtered",{detail:!1}))}};k(),b.length&&b.forEach(function(b){let c=b.getAttribute("data-type"),d=b.getAttribute("data-source")||c;switch(c){case"date-range":let e=b.querySelector("[data-from]"),f=b.querySelector("[data-to]"),g=b.querySelector(".w-filter-item-submit");if(!e||!f||!g)return;g.onclick=function(){if(e.value&&f.value){let a=[];a[0]=e.value,a[1]=f.value,h.date_query=a,document.body.dispatchEvent(j)}};break;case"rating":let k=b.querySelectorAll(".w-filter-rating-star");if(!k.length)break;for(let a=0,c=k.length;a<c;a++)k[a].onclick=function(){if(!k[a].classList.contains("selected")){let c=b.querySelector(".w-filter-rating-star.selected");c&&c.classList.remove("selected"),b.classList.contains("selected")||b.classList.add("selected"),k[a].classList.add("selected"),h.rating=a+1,document.body.dispatchEvent(j)}};break;case"sort-order":let l=b.querySelector(".w-product-filter-select-field");if(!l)return;l.onchange=function(){h[d]=l.value,document.body.dispatchEvent(j)};break;case"select":let m=b.querySelector(".w-product-filter-select-field");if(!m)return;m.onchange=function(){let a=+m.value;h[d]=a,document.body.dispatchEvent(j)};break;case"radio":let n=b.querySelectorAll("[type=\"radio\"]");if(!n.length)return;for(let a=0,b=n.length;a<b;a++)n[a].onchange=function(){let b=+n[a].parentNode.getAttribute("data-id");h[d]=b,document.body.dispatchEvent(j)};break;case"range-slider":if("object"==typeof b.noUiSlider)return;let o=+b.getAttribute("data-from")||0,p=+b.getAttribute("data-to")||100;const i=noUiSlider.create(b,{tooltips:!0,connect:!0,start:[o,p],step:1,range:{min:o,max:p},format:{from:function(b){return a(b)},to:function(b){return a(b)}}});i.on("change",function(a){h["range_slider"+d]=a,document.body.dispatchEvent(j)});break;case"check-range":let q=b.querySelectorAll("[type=\"checkbox\"]");if(!q.length)return;for(let a=0,b=q.length;a<b;a++)q[a].onclick=function(){let b=q[a].parentNode.getAttribute("data-value");window["data_source_"+d]||(window["data_source_"+d]=[]),window["data_source_"+d].includes(b)?window["data_source_"+d]=window["data_source_"+d].filter(function(a){return a!==b}):window["data_source_"+d].push(b),h["check_range"+d]=window["data_source_"+d],document.body.dispatchEvent(j)};break;case"checkbox":let r=b.querySelectorAll("[type=\"checkbox\"]");if(!r.length)return;for(let a=0,b=r.length;a<b;a++)r[a].onclick=function(){let b=+r[a].parentNode.getAttribute("data-id");window["data_source_"+d]||(window["data_source_"+d]=[]),window["data_source_"+d].includes(b)?window["data_source_"+d]=window["data_source_"+d].filter(function(a){return a!==b}):window["data_source_"+d].push(b),h[d]=window["data_source_"+d],document.body.dispatchEvent(j)};break;case"search":let s=b.querySelector(".w-product-filter-text-field");if(!s)return;s.oninput=function(){woostifyFilterSearchDelay(function(){let a=s.value.trim(),b=s.getAttribute("data-value")||"";b==a||(s.setAttribute("data-value",a),h.keyword=a,document.body.dispatchEvent(j))},500)};}});const l=function(){let a=document.querySelectorAll(".w-product-filter-text-field");a.length&&a.forEach(function(a){a.value=""})},m=function(){let a=document.querySelectorAll(".w-product-filter-type-range-slider");a.length&&a.forEach(function(a){"object"!=typeof a.noUiSlider||a.noUiSlider.set(a.noUiSlider.options.start)})},n=function(){let a=document.querySelectorAll(".w-filter-date-picker");a.length&&a.forEach(function(a){a.value=""})},o=function(){let a=document.querySelectorAll(".w-product-filter-type-rating.selected .selected");a.length&&a.forEach(function(a){a.parentNode.classList.remove("selected"),a.classList.remove("selected")})},p=function(){let a=document.querySelectorAll(".w-product-filter [type=\"checkbox\"]:checked, .w-product-filter [type=\"radio\"]:checked");a.length&&a.forEach(function(a){a.checked=!1})};document.body.addEventListener("filtered",function(a){let e=document.body.getBoundingClientRect().top,f=c.getBoundingClientRect().top;f<g&&window.scrollTo({top:-1*e- -1*f-g,behavior:"smooth"}),a.detail&&(i=1),c.classList.add("filter-updating"),b.length&&b.forEach(function(a){a.classList.add("filter-updating")});let q={action:"woostify_product_filter",ajax_nonce:woostify_product_filter.ajax_nonce,per_page:+c.getAttribute("data-posts"),paged:i,data:JSON.stringify(h)};q=new URLSearchParams(q).toString();let r=new Request(woostify_product_filter.ajax_url,{method:"POST",body:q,credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"})});fetch(r).then(function(a){if(200!==a.status)throw console.log("Status Code: "+a.status),a;return a.json()}).then(function(a){if(a.success){let b=a.data,e=c.querySelector(".products"),f=c.querySelector(".woocommerce-pagination");e&&(e.innerHTML=b.content),f&&(b.pagination?f.innerHTML=b.pagination:f.innerHTML=""),d&&(d.innerHTML=b.filtered)}}).catch(function(a){console.log(a)}).finally(function(){c.classList.remove("filter-updating"),b.length&&b.forEach(function(a){a.classList.remove("filter-updating")});let a=d?d.querySelectorAll(".w-filter-key-remove"):[];if(a.length)for(let b=0,c=a.length;b<c;b++)a[b].onclick=function(){let c=a[b].getAttribute("data-type"),d=a[b].getAttribute("data-value"),e=a[b].getAttribute("data-source");if(c){switch(c){case"clear":h={};let f=a[b].parentNode.querySelectorAll("[data-source]");f.length&&f.forEach(function(a){let b=a.getAttribute("data-source");window["data_source_"+b]&&(window["data_source_"+b]=[])}),l(),m(),n(),o(),p();break;case"search":l(),delete h.keyword;break;case"date-range":n(),delete h.date_query;break;case"check-range":if(!d||!e)return;let g=h["check_range"+e];if("undefined"!==g){checkRangeValue=g.filter(function(a){return a!==d}),h["check_range"+e]=checkRangeValue;let a=document.querySelector("[data-source=\""+e+"\"] [data-value=\""+d+"\"] [type=\"checkbox\"]:checked");a&&(a.checked=!1)}break;case"range-slider":m(),e&&delete h["range_slider"+e];break;case"rating":o(),delete h.rating;break;case"terms":let i=+a[b].getAttribute("data-id"),j=a[b].getAttribute("data-multi"),k=document.querySelector("[data-source=\""+e+"\"] [data-id=\""+i+"\"] [type=\"radio\"]:checked");if(j){let a=h[e];if("undefined"!==a){window["data_source_"+e]&&(window["data_source_"+e]=a.filter(function(a){return a!==i}),h[e]=window["data_source_"+e]);let b=document.querySelector("[data-source=\""+e+"\"] [data-id=\""+i+"\"] [type=\"checkbox\"]:checked");b&&(b.checked=!1)}}else delete h[e],k&&(k.checked=!1);}document.body.dispatchEvent(j)}};k(),"function"==typeof woostifyQuickView&&woostifyQuickView()})})},woostifyToggleChildTerm=function(){let a=document.querySelectorAll(".w-filter-item-cat.has-children");a.length&&a.forEach(function(a){let b=a.querySelector(".toggle-child-cat");b&&(b.onclick=function(){let a=b.parentNode.querySelector(".w-filter-item-inner"),c=b.getAttribute("data-toggle");a&&("expand"===c?(b.setAttribute("data-toggle","collapse"),b.innerText="\uFF0D",a.classList.add("active")):(b.setAttribute("data-toggle","expand"),b.innerText="\uFF0B",a.classList.remove("active")))})})};document.addEventListener("DOMContentLoaded",function(){var a=Math.round;woostifyAjaxFilter(),woostifyFilterDatePicker(),woostifyToggleChildTerm(),"function"==typeof onElementorLoaded&&onElementorLoaded(function(){window.elementorFrontend.hooks.addAction("frontend/element_ready/woostify-filter-date-range.default",function(){woostifyFilterDatePicker()}),window.elementorFrontend.hooks.addAction("frontend/element_ready/woostify-filter-range-slider.default",function(){let b=document.querySelectorAll(".w-product-filter-type-range-slider");b.length&&b.forEach(function(b){if("object"!=typeof b.noUiSlider){let c=+b.getAttribute("data-from")||0,d=+b.getAttribute("data-to")||100;noUiSlider.create(b,{tooltips:!0,connect:!0,start:[c,d],step:1,range:{min:c,max:d},format:{from:function(b){return a(b)},to:function(b){return a(b)}}})}})})})});