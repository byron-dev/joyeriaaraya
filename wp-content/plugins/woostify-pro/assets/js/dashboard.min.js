'use strict';var checkLicenses=function(){var a=document.getElementById("woostify_license_key_field"),b=document.getElementById("woostify_pro_license_key_submit");a&&b&&(b.onclick=function(c){c.preventDefault();var d=a.value.trim(),e=document.querySelector(".license-key-message");if(!d.length)return void alert(woostify_pro_dashboard.license_empty);b.classList.add("updating-message");var f=new Request(ajaxurl,{method:"POST",body:"action=woostify_pro_check_licenses&ajax_nonce="+woostify_pro_dashboard.ajax_nonce+"&woostify_license_key="+d,credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"})}),g=function(){e&&(e.innerHTML=woostify_pro_dashboard.receiving,e.classList.remove("not-receiving-updates"),e.classList.add("receiving-updates")),b.innerHTML=woostify_pro_dashboard.deactivate_label,a.disabled=!0},h=function(){e&&(e.innerHTML=woostify_pro_dashboard.not_receiving,e.classList.add("not-receiving-updates"),e.classList.remove("receiving-updates")),b.innerHTML=woostify_pro_dashboard.activate_label,a.disabled=!1};fetch(f).then(function(a){return 200===a.status?void a.json().then(function(a){for(var b,c=!1,d="activate",e=0,f=a.length;e<f;e++)(b=JSON.parse(a[e]),!!b.success)&&(b.success&&"valid"===b.license?c=!0:b.success&&"deactivated"===b.license&&(c=!0,d="deactivate"));c?"activate"==d?(alert(woostify_pro_dashboard.activate_success_message),g()):(alert(woostify_pro_dashboard.deactivate_success_message),h()):(h(),alert(woostify_pro_dashboard.failure_message))}):(console.log("Status Code: "+a.status),void b.classList.remove("updating-message"))}).catch(function(a){console.log(a)}).finally(function(){b.classList.remove("updating-message")})})},moduleCheckbox=function(){var a=document.getElementById("woostify-select-all");a&&a.addEventListener("click",function(){var b=document.querySelectorAll(".module-checkbox");b.length&&b.forEach(function(b){b.closest(".module-item.disabled")||(b.checked=!!a.checked,b.addEventListener("click",function(){a.checked=!1},{once:!0}))})})},detectFeature=function(){var a=document.querySelectorAll(".module-item"),b=document.querySelectorAll(".module-item.activated");if(a.length){var c=a.length==b.length?"yes":"",d=new Request(ajaxurl,{method:"POST",body:"action=all_feature_activated&detect="+c+"&ajax_nonce="+woostify_pro_dashboard.ajax_nonce,credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"})});fetch(d)}},moduleAction=function(){var a=document.querySelector(".woostify-module-list");if(a){var b=a.querySelectorAll(".module-item");b.length&&b.forEach(function(a){var b=a.querySelector(".module-action-button");b&&(b.onclick=function(){var a=b.closest(".module-item"),c=b.getAttribute("data-name"),d=b.getAttribute("data-value"),e=woostify_pro_dashboard.activating;"activated"===d&&(e=woostify_pro_dashboard.deactivating);var f=new Request(ajaxurl,{method:"POST",body:"action=module_action&name="+c+"&status="+d+"&ajax_nonce="+woostify_pro_dashboard.ajax_nonce,credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"})});b.innerHTML=e,a.classList.add("loading"),fetch(f).then(function(c){return 200===c.status?void c.json().then(function(c){c.success&&(b.setAttribute("data-value",c.data.status),b.innerHTML="activated"===c.data.status?"deactivate":"activate",a.className="",a.classList.add("module-item",c.data.status),detectFeature())}):void console.log("Status Code: "+c.status)}).finally(function(){a.classList.remove("loading")})})})}},multiModuleAction=function(){var a=document.querySelector(".multi-module-action"),b=document.querySelector(".multi-module-action-button"),c=document.querySelectorAll(".module-item:not(.disabled)");a&&b&&c.length&&b.addEventListener("click",function(){var b=a.value.trim();b&&c.forEach(function(a,c){var d=a.querySelector(".module-checkbox"),e=a.querySelector(".module-action-button"),f=e.getAttribute("data-value").trim();if(a.classList.contains(".loading"))return void alert("Process running.");if(b!==f&&d.checked){setTimeout(function(){e.click()},200*c)}})})};document.addEventListener("DOMContentLoaded",function(){checkLicenses(),moduleCheckbox(),moduleAction(),multiModuleAction()});